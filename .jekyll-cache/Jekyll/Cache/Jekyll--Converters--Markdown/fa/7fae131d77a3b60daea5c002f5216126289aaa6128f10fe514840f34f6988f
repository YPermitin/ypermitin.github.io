I"{<p>Небольшая капля информации о мониторинге и простой установке Zabbix.</p>

<h1 id="что-такое-мониторинг">Что такое мониторинг</h1>

<p>Рано или поздно (а лучше рано) возникают вопросы повышения качества сервисов, улучшения стабильности и быстрого реагирования на возникающие проблемы. Их можно решать различными путями, но самым эффективным и стратегически правильным является разворачивание мониторинга.</p>

<p>При этом под мониторить можно как инфраструктуру, так и вспомогательные сервисы, показатели состояния приложений и бизнес-показатели. Главное, чтобы собираемые данные были востребованы, а не хранились “для галочки” в базах данных до лучших времен.</p>

<p>Обычно от мониторинга ждут следующего:</p>

<ul>
  <li>Оповещение о критических событиях в системе на основе собираемых данных</li>
  <li>Отражение текущего актуального состояния компонентов системы</li>
  <li>Удобная визуализация данных, в т.ч. и за большие периоды</li>
  <li>Построение отчетов</li>
</ul>

<p>При этом на самом старте его разворачивания и настройки чаще всего нет четкого понимания какие инструменты использовать, какие метрики собирать, когда нужно рассылать оповещения и так далее. Вместо того, чтобы надолго уходить в изучение этой темы и месяц выбирать всем отделом систему мониторинга и набор метрик - проще всего воспользоваться готовыми рецептами, которые уже после начала использования адаптировать под себя. Главное, чтобы мониторинг был востребованным, а данные им собираемые могли использоваться на практике.</p>

<p>Таким первым шагом может быть установка системы мониторинга <a href="https://www.zabbix.com/ru">Zabbix</a>. Это не единственное решение, но весьма себя зарекомендовавшее. Другими решениями можно назвать:</p>

<ul>
  <li><a href="https://grafana.com/oss/graphite/">Graphite</a></li>
  <li><a href="https://prometheus.io/">Prometheus</a></li>
  <li><a href="https://grafana.com/">Graphana</a> - интерфейс для визуализации</li>
  <li><a href="https://github.com/statsd/statsd">StatsD</a></li>
  <li>И многие другие.</li>
</ul>

<p>Но мы сегодня остановимся именно на Zabbix. Но не обязательно использовать на рабочем окружении только этот продукт, ведь система мониторинга из нескольких частей или компонентов всегда лучше, чем единый монолит на все случаи и времена. Поэтому использовать вместе с Zabbix, например, Prometheus - просто отлично.</p>

<h1 id="совсем-немного-о-zabbix">Совсем немного о Zabbix</h1>

<p>Он может все! Мониторинг сетей, серверов, облачных ресурсов, сервисов и бизнес показателей. Это мощнейшая система мониторинга распределенного архитектуры, да к тому же и OpenSource. Все самое актуальное и необходимое всегда можно узнать в <a href="https://www.zabbix.com/ru/manuals">официальной документации</a>. А пока кратко пробежимся по возможностям.</p>

<p>Сбор данных Zabbix может выполнят на основе:</p>

<ul>
  <li>Логов</li>
  <li>Интерфейсов</li>
  <li>API</li>
  <li>SNMP</li>
  <li>ping</li>
  <li>Запросов к ресурсам</li>
  <li>Открытых портов</li>
  <li>Анализу запущеных процессов</li>
  <li>Счетчиков производительности ОС</li>
  <li>Информации о СУБД (резервные копии, показатели производительности и др.)</li>
</ul>

<p>Все эти данные позволяют в дальнейшем диагностировать приложения и сервисы, делать правильные решения по улучшению стабильности и производительности. Кроме этого есть возможность использовать шаблоны собираемых показателей и автообнаружение новых машин для мониторинга в сети. В общем, все то, что и должна делать система мониторинга.</p>

<p>Пройдем все основные шаги по установке и началу использования Zabbix.</p>

<h1 id="подготовка-у-становке">Подготовка у становке</h1>

<p>На момент создания публикации выпущена версия Zabbix 5.0, в которой есть различные новые фишки, одна из которых это <a href="https://www.zabbix.com/documentation/current/ru/manual/appendix/install/timescaledb">TimescaleDB</a>, через которую выполнена реализация партиционирования данных при организации хранилища на базе PostgreSQL. Но мы не будем ее использовать. Мы пойдем по пути использования предыдущих стабильных версий:</p>

<ul>
  <li><a href="https://www.zabbix.com/documentation/4.0/ru/manual/installation/install_from_packages">Zabbix 4</a></li>
  <li><a href="https://www.centos.org/download/">CentOS 7</a></li>
  <li><a href="https://www.postgresql.org/about/news/1894/">PostgreSQL 11</a></li>
  <li><a href="https://httpd.apache.org/">Apache</a></li>
</ul>

<p>Будем считать, что CentOS уже установлен, а также сконфигурирован firewall, сетевые настройки, SELinux и прочее. Мы лишь остановимся на настройках, непосредственно связанных с Zabbix.</p>

<p>Итак, поехали!</p>

<h1 id="подготавливаем-базу-данных">Подготавливаем базу данных</h1>

<h1 id="установка-и-конфигурирование-zabbix">Установка и конфигурирование Zabbix</h1>

<h1 id="настраиваем-агента">Настраиваем агента</h1>

:ET