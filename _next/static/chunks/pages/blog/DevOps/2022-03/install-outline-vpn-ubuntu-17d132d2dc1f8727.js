(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2495],{1406:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/blog/DevOps/2022-03/install-outline-vpn-ubuntu",function(){return s(2448)}])},2448:function(e,n,s){"use strict";s.r(n);var t=s(5893),l=s(9305);s(7294);var i=s(850);n.default=()=>(0,t.jsxs)(l.Xg,{blogcentered:!0,children:[(0,t.jsx)(l.xv,{title:!0,className:"mt-10 md:text",children:"Общая информация"}),(0,t.jsxs)(l.xv,{p:!0,children:["Outline VPN - это бесплатный инструмент с открытым исходным кодом, позволяющий развернуть собственную VPN на Вашем собственном сервере или на машине облачного провайдера. Подробную информацию Вы можете узнать ",(0,t.jsx)("b",{children:(0,t.jsx)("u",{children:(0,t.jsx)(l.e9,{newTab:!0,href:"https://getoutline.org/ru/",children:"здесь"})})})," и ",(0,t.jsx)("b",{children:(0,t.jsx)("u",{children:(0,t.jsx)(l.e9,{newTab:!0,href:"https://en.wikipedia.org/wiki/Outline_VPN",children:"здесь"})})}),"."]}),(0,t.jsx)(l.xv,{p:!0,children:"В своем составе имеет как графические инструменты, так и средства работы через командную строку. Позволяет использовать VPN как на настольных компьютерах, так и на мобильных устройствах."}),(0,t.jsx)(l.xv,{title:!0,className:"mt-10 md:text",children:"Прежде чем начать"}),(0,t.jsx)(l.xv,{p:!0,children:"Вам нужен сервер. Да, его нужно арендовать, учитывая его местоположение. Например, если Вам нужно получать доступ к ресурсам, которые недоступны в текущем местоположении, но доступны, например, в Канаде, то смело арендуйте виртуальную машину в AWS, Digital Ocean или любом другом месте."}),(0,t.jsx)(l.xv,{p:!0,children:"Для простых задач, например открытие сайтов, обмена текстовыми сообщениями в мессенджерах и т.д., подойдет хост с минимальными ресурсами:"}),(0,t.jsxs)(l.aV,{children:[(0,t.jsx)("li",{children:"1 ядро CPU."}),(0,t.jsx)("li",{children:"1 ГБ RAM (можно и меньше)."}),(0,t.jsx)("li",{children:"10 GB HDD для файлов ОС в основном."})]}),(0,t.jsxs)(l.xv,{p:!0,children:["Стоимость аренды такого сервера от 3$ до 5$ в месяц, плюс-минус. По необходимости ресурсов можно добавлять поболее. Операционная система - Ubuntu 20.04, т.к. инструкция именно для нее ",":)"]}),(0,t.jsx)(l.xv,{p:!0,children:"Как арендовать виртуальную машину тут рассматривать не будем, все зависит от провайдера."}),(0,t.jsx)(l.xv,{title:!0,className:"mt-10 md:text",children:"Начальная настройка сервера"}),(0,t.jsx)(l.xv,{p:!0,children:"И так, виртуальная машина арендована, доступ к ней по SSH имеется, Ubuntu установлена. Далее устанавливаем последние обновления."}),(0,t.jsx)(i.Z,{code:"\napt update\napt upgrade\n                ",className:"my-5",language:"bash"}),(0,t.jsx)(l.xv,{p:!0,children:"Сделайте перезагрузку машины после этого, если есть необходимость после установки обновлений."}),(0,t.jsx)(l.xv,{p:!0,children:"Сразу настроим брэндмауэр, чтобы защитить машину от несанкционированного доступа. Открываем доступ через SSH."}),(0,t.jsx)(i.Z,{code:"\nsudo ufw allow 22/tcp\n                ",className:"my-5",language:"bash"}),(0,t.jsx)(l.xv,{p:!0,children:"Если у Вас статический IP, то для безопасности доступ по SSH можно разрешить только для него."}),(0,t.jsx)(i.Z,{code:"\nsudo ufw allow from <ВашПостоянныйIP> to any port 22\n                ",className:"my-5",language:"bash"}),(0,t.jsx)(l.xv,{p:!0,children:"И включаем брэндмауэр."}),(0,t.jsx)(i.Z,{code:"\nsudo ufw enable\n                ",className:"my-5",language:"bash"}),(0,t.jsx)(l.xv,{p:!0,children:"Отлично! Машина защищена. Идем дальше."}),(0,t.jsx)(l.xv,{title:!0,className:"mt-10 md:text",children:"Установка Outline Server"}),(0,t.jsxs)(l.xv,{p:!0,children:["Для установки воспользуемся готовыми скриптами из проекта ",(0,t.jsx)("b",{children:(0,t.jsx)("u",{children:(0,t.jsx)(l.e9,{newTab:!0,href:"https://github.com/Jigsaw-Code/outline-server",children:"outline-server"})})})," компании Jigsaw."]}),(0,t.jsx)(l.xv,{p:!0,children:"Скрипт находится по адресу:"}),(0,t.jsx)(i.Z,{code:"\nhttps://github.com/Jigsaw-Code/outline-server/blob/master/src/server_manager/install_scripts/install_server.sh\n\n                ",className:"my-5",language:"text"}),(0,t.jsx)(l.xv,{p:!0,children:"Для установки достаточно выполнить следующую команду."}),(0,t.jsx)(i.Z,{code:"\nsudo wget -qO- https://raw.githubusercontent.com/Jigsaw-Code/outline-server/master/src/server_manager/install_scripts/install_server.sh | bash\n                ",className:"my-5",language:"bash"}),(0,t.jsx)(l.xv,{p:!0,children:"Будет установлен Docker и службы самого Outline, а также все зависимости. При необходимости Вы можете установить Docker самостоятельно перед запуском скрипта."}),(0,t.jsx)(i.Z,{code:"\nsudo curl https://get.docker.com | sh\n                ",className:"my-5",language:"bash"}),(0,t.jsx)(l.xv,{p:!0,children:"Когда скрипт закончит, то выведет примерно такое содержимое."}),(0,t.jsx)(i.Z,{code:'\n{ \n  "apiUrl": "https://0.0.0.0:0000/XXXXXXXXXXXX", \n  "certSha256": "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX" \n}\n                ',className:"my-5",language:"json"}),(0,t.jsx)(l.xv,{p:!0,children:"Также в консольном выводе будет информация о портах, которые нужно открыть для работы OutlineVPN Manager. Добавляем их в разрешенные (замените только на свои значения)."}),(0,t.jsx)(i.Z,{code:"\nsudo ufw allow 31111/tcp\nsudo ufw allow 24311/tcp\n                ",className:"my-5",language:"bash"}),(0,t.jsx)(l.xv,{p:!0,children:"Сохраните это себе на будущее. По факту сервер Outline VPN уже установлен и нам лишь нужно его настроить для своих нужд."}),(0,t.jsx)(l.xv,{title:!0,className:"mt-10 md:text",children:"Клиент для управления сервером"}),(0,t.jsxs)(l.xv,{p:!0,children:["Управление серверном VPN, в т.ч. раздача доступов, осуществляется с помощью ",(0,t.jsx)("b",{children:(0,t.jsx)("u",{children:(0,t.jsx)(l.e9,{newTab:!0,href:"https://getoutline.org/ru/get-started/#step-1",children:"Outline Manager"})})}),", доступной для Windows, Max и Linux."]}),(0,t.jsx)(l.xv,{p:!0,children:"При запуске нужно добавить сервер и выбрать “Настроить Outline где угодно”. Появится инструкция по установке с помощью скрипта, который мы ранее запускали. А после поле для ввода ключа и адреса, который Вы до этого сохранили."}),(0,t.jsx)(l.xv,{p:!0,children:"После этого у Вас появится доступ к управлению сервером."}),(0,t.jsx)(l.xv,{title:!0,className:"mt-10 md:text",children:"Добавляем ключ"}),(0,t.jsxs)(l.xv,{p:!0,children:["В Outline Manager добавляем новый ключ в управлении сервером. Программа покажет ",(0,t.jsx)("b",{children:(0,t.jsx)("u",{children:(0,t.jsx)(l.e9,{newTab:!0,href:"https://github.com/Jigsaw-Code/outline-client/blob/master/docs/invitation-instructions.md",children:"ссылку на инструкцию"})})})," и сам ключ в виде строки:"]}),(0,t.jsx)(i.Z,{code:"\nss://XXXXXXXXXXXX@9.9.9.9:0/?outline=1\n                ",className:"my-5",language:"text"}),(0,t.jsx)(l.xv,{p:!0,children:"Скопируйте этот ключ, он понадобиться при запуске клиента Outline."}),(0,t.jsx)(l.xv,{title:!0,className:"mt-10 md:text",children:"Клиент для подключения"}),(0,t.jsxs)(l.xv,{p:!0,children:["И последний шаг - установка ",(0,t.jsx)("b",{children:(0,t.jsx)("u",{children:(0,t.jsx)(l.e9,{newTab:!0,href:"https://getoutline.org/ru/get-started/#step-3",children:"клиента для подключения"})})}),". Есть приложения для Android, Windows, Chrome, iOS, MacOS, Linux."]}),(0,t.jsx)(l.xv,{p:!0,children:"При первом запуске нужно нажать “Добавить сервер” и вставить полученный выше ключ."}),(0,t.jsx)(l.xv,{p:!0,children:"Готово!"}),(0,t.jsx)(l.xv,{title:!0,className:"mt-10 md:text",children:"Послесловие"}),(0,t.jsx)(l.xv,{p:!0,children:"Теперь Вы можете использовать Outline VPN. Надеюсь, что Вы будете его использовать без злого умысла."}),(0,t.jsx)(l.xv,{title:!0,className:"mt-10 md:text",children:"Полезные ссылки"}),(0,t.jsxs)(l.aV,{children:[(0,t.jsx)("li",{children:(0,t.jsx)("b",{children:(0,t.jsx)("u",{children:(0,t.jsx)(l.e9,{newTab:!0,href:"https://getoutline.org/ru/",children:"Официальный сайт"})})})}),(0,t.jsx)("li",{children:(0,t.jsx)("b",{children:(0,t.jsx)("u",{children:(0,t.jsx)(l.e9,{newTab:!0,href:"https://github.com/outline/outline",children:"Официальный репозиторий на GitHub"})})})}),(0,t.jsx)("li",{children:(0,t.jsx)("b",{children:(0,t.jsx)("u",{children:(0,t.jsx)(l.e9,{newTab:!0,href:"https://app.getoutline.com/share/770a97da-13e5-401e-9f8a-37949c19f97e/doc/hosting-outline-nipGaCRBDu",children:"Официальная документация"})})})}),(0,t.jsx)("li",{children:(0,t.jsx)("b",{children:(0,t.jsx)("u",{children:(0,t.jsx)(l.e9,{newTab:!0,href:"https://habr.com/ru/articles/358828/",children:"Outline: Делаем свой личный VPN от Google за 5$ в месяц (и за 1€ для продвинутых)"})})})}),(0,t.jsx)("li",{children:(0,t.jsx)("b",{children:(0,t.jsx)("u",{children:(0,t.jsx)(l.e9,{newTab:!0,href:"https://gist.github.com/okeehou/275bb83601be346921622e05f13cba70",children:"How to setup an Outline VPN Server on Ubuntu 16.04"})})})})]})]})},850:function(e,n,s){"use strict";s.d(n,{Z:function(){return h}});var t=s(5893),l=s(7294),i=s(4965),r=s(4275),a=s(7340);function c(){let e=(0,a._)(["\n  text-align: left;\n  overflow: hidden;\n  font-size: 14px;\n  border-radius: 6px;\n  overflow: auto;\n  max-height: 350px;\n\n  & .token-line {\n    line-height: 1.3em;\n    height: 1.3em;\n  }\n"]);return c=function(){return e},e}let d=s(964).ZP.pre(c());var h=e=>{let{code:n,className:a,language:c}=e;return(void 0!==s.g?s.g:window).Prism=i.p1,s(1354),s(9016),s(5266),s(2927),s(1315),s(7874),s(6862),(0,t.jsx)("div",{className:(0,r.GF)("bg-blue-500 md:p-5 p-2",a),children:(0,t.jsx)("div",{className:"shadow-lg",children:(0,t.jsx)(i.y$,{theme:i.np.vsDark,code:n,language:null!=c?c:c="tsx",children:e=>{let{className:n,style:s,tokens:i,getLineProps:r,getTokenProps:a}=e;return(0,t.jsx)(d,{className:n,style:s,children:i.map((e,n)=>(0,l.createElement)("div",{...r({line:e,key:n}),key:Math.random()},e.map((e,n)=>(0,l.createElement)("span",{...a({token:e,key:n}),key:Math.random()}))))})}})})})}},9305:function(e,n,s){"use strict";s.d(n,{Ee:function(){return a},Xg:function(){return i},aV:function(){return d},e9:function(){return h},o_:function(){return x},ty:function(){return c},xv:function(){return r}});var t=s(5152),l=s.n(t);let i=l()(()=>Promise.all([s.e(4838),s.e(4738),s.e(4817),s.e(1664),s.e(7167)]).then(s.bind(s,7167)),{loadableGenerated:{webpack:()=>[7167]}}),r=l()(()=>s.e(9179).then(s.bind(s,9179)),{loadableGenerated:{webpack:()=>[9179]}}),a=l()(()=>s.e(1974).then(s.bind(s,1974)),{loadableGenerated:{webpack:()=>[1974]}}),c=l()(()=>s.e(8547).then(s.bind(s,8547)),{loadableGenerated:{webpack:()=>[8547]}}),d=l()(()=>s.e(6806).then(s.bind(s,6806)),{loadableGenerated:{webpack:()=>[6806]}}),h=l()(()=>Promise.all([s.e(1664),s.e(1465)]).then(s.bind(s,1465)),{loadableGenerated:{webpack:()=>[1465]}});l()(()=>s.e(567).then(s.bind(s,567)),{loadableGenerated:{webpack:()=>[567]}}),l()(()=>Promise.all([s.e(2004),s.e(4139)]).then(s.bind(s,4139)),{loadableGenerated:{webpack:()=>[4139]}});let x=l()(()=>Promise.all([s.e(5507),s.e(7472),s.e(584),s.e(7870)]).then(s.bind(s,7870)),{loadableGenerated:{webpack:()=>[7870]}})}},function(e){e.O(0,[1102,2888,9774,179],function(){return e(e.s=1406)}),_N_E=e.O()}]);