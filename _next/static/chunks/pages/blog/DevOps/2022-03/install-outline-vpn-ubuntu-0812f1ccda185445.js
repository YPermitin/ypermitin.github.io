(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2495],{51406:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/blog/DevOps/2022-03/install-outline-vpn-ubuntu",function(){return t(57833)}])},57833:function(e,n,t){"use strict";t.r(n);var s=t(85893),l=t(44853);t(67294);var r=t(74313);n.default=()=>(0,s.jsxs)(l.Xg,{blogcentered:!0,children:[(0,s.jsx)(l.xv,{title:!0,className:"mt-10 md:text",children:"Общая информация"}),(0,s.jsxs)(l.xv,{p:!0,children:["Outline VPN - это бесплатный инструмент с открытым исходным кодом, позволяющий развернуть собственную VPN на Вашем собственном сервере или на машине облачного провайдера. Подробную информацию Вы можете узнать ",(0,s.jsx)("b",{children:(0,s.jsx)("u",{children:(0,s.jsx)(l.e9,{newTab:!0,href:"https://getoutline.org/ru/",children:"здесь"})})})," и ",(0,s.jsx)("b",{children:(0,s.jsx)("u",{children:(0,s.jsx)(l.e9,{newTab:!0,href:"https://en.wikipedia.org/wiki/Outline_VPN",children:"здесь"})})}),"."]}),(0,s.jsx)(l.xv,{p:!0,children:"В своем составе имеет как графические инструменты, так и средства работы через командную строку. Позволяет использовать VPN как на настольных компьютерах, так и на мобильных устройствах."}),(0,s.jsx)(l.xv,{title:!0,className:"mt-10 md:text",children:"Прежде чем начать"}),(0,s.jsx)(l.xv,{p:!0,children:"Вам нужен сервер. Да, его нужно арендовать, учитывая его местоположение. Например, если Вам нужно получать доступ к ресурсам, которые недоступны в текущем местоположении, но доступны, например, в Канаде, то смело арендуйте виртуальную машину в AWS, Digital Ocean или любом другом месте."}),(0,s.jsx)(l.xv,{p:!0,children:"Для простых задач, например открытие сайтов, обмена текстовыми сообщениями в мессенджерах и т.д., подойдет хост с минимальными ресурсами:"}),(0,s.jsxs)(l.aV,{children:[(0,s.jsx)("li",{children:"1 ядро CPU."}),(0,s.jsx)("li",{children:"1 ГБ RAM (можно и меньше)."}),(0,s.jsx)("li",{children:"10 GB HDD для файлов ОС в основном."})]}),(0,s.jsxs)(l.xv,{p:!0,children:["Стоимость аренды такого сервера от 3$ до 5$ в месяц, плюс-минус. По необходимости ресурсов можно добавлять поболее. Операционная система - Ubuntu 20.04, т.к. инструкция именно для нее ",":)"]}),(0,s.jsx)(l.xv,{p:!0,children:"Как арендовать виртуальную машину тут рассматривать не будем, все зависит от провайдера."}),(0,s.jsx)(l.xv,{title:!0,className:"mt-10 md:text",children:"Начальная настройка сервера"}),(0,s.jsx)(l.xv,{p:!0,children:"И так, виртуальная машина арендована, доступ к ней по SSH имеется, Ubuntu установлена. Далее устанавливаем последние обновления."}),(0,s.jsx)(r.Z,{code:"\napt update\napt upgrade\n                ",className:"my-5",language:"bash"}),(0,s.jsx)(l.xv,{p:!0,children:"Сделайте перезагрузку машины после этого, если есть необходимость после установки обновлений."}),(0,s.jsx)(l.xv,{p:!0,children:"Сразу настроим брэндмауэр, чтобы защитить машину от несанкционированного доступа. Открываем доступ через SSH."}),(0,s.jsx)(r.Z,{code:"\nsudo ufw allow 22/tcp\n                ",className:"my-5",language:"bash"}),(0,s.jsx)(l.xv,{p:!0,children:"Если у Вас статический IP, то для безопасности доступ по SSH можно разрешить только для него."}),(0,s.jsx)(r.Z,{code:"\nsudo ufw allow from <ВашПостоянныйIP> to any port 22\n                ",className:"my-5",language:"bash"}),(0,s.jsx)(l.xv,{p:!0,children:"И включаем брэндмауэр."}),(0,s.jsx)(r.Z,{code:"\nsudo ufw enable\n                ",className:"my-5",language:"bash"}),(0,s.jsx)(l.xv,{p:!0,children:"Отлично! Машина защищена. Идем дальше."}),(0,s.jsx)(l.xv,{title:!0,className:"mt-10 md:text",children:"Установка Outline Server"}),(0,s.jsxs)(l.xv,{p:!0,children:["Для установки воспользуемся готовыми скриптами из проекта ",(0,s.jsx)("b",{children:(0,s.jsx)("u",{children:(0,s.jsx)(l.e9,{newTab:!0,href:"https://github.com/Jigsaw-Code/outline-server",children:"outline-server"})})})," компании Jigsaw."]}),(0,s.jsx)(l.xv,{p:!0,children:"Скрипт находится по адресу:"}),(0,s.jsx)(r.Z,{code:"\nhttps://github.com/Jigsaw-Code/outline-server/blob/master/src/server_manager/install_scripts/install_server.sh\n\n                ",className:"my-5",language:"text"}),(0,s.jsx)(l.xv,{p:!0,children:"Для установки достаточно выполнить следующую команду."}),(0,s.jsx)(r.Z,{code:"\nsudo wget -qO- https://raw.githubusercontent.com/Jigsaw-Code/outline-server/master/src/server_manager/install_scripts/install_server.sh | bash\n                ",className:"my-5",language:"bash"}),(0,s.jsx)(l.xv,{p:!0,children:"Будет установлен Docker и службы самого Outline, а также все зависимости. При необходимости Вы можете установить Docker самостоятельно перед запуском скрипта."}),(0,s.jsx)(r.Z,{code:"\nsudo curl https://get.docker.com | sh\n                ",className:"my-5",language:"bash"}),(0,s.jsx)(l.xv,{p:!0,children:"Когда скрипт закончит, то выведет примерно такое содержимое."}),(0,s.jsx)(r.Z,{code:'\n{ \n  "apiUrl": "https://0.0.0.0:0000/XXXXXXXXXXXX", \n  "certSha256": "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX" \n}\n                ',className:"my-5",language:"json"}),(0,s.jsx)(l.xv,{p:!0,children:"Также в консольном выводе будет информация о портах, которые нужно открыть для работы OutlineVPN Manager. Добавляем их в разрешенные (замените только на свои значения)."}),(0,s.jsx)(r.Z,{code:"\nsudo ufw allow 31111/tcp\nsudo ufw allow 24311/tcp\n                ",className:"my-5",language:"bash"}),(0,s.jsx)(l.xv,{p:!0,children:"Сохраните это себе на будущее. По факту сервер Outline VPN уже установлен и нам лишь нужно его настроить для своих нужд."}),(0,s.jsx)(l.xv,{title:!0,className:"mt-10 md:text",children:"Клиент для управления сервером"}),(0,s.jsxs)(l.xv,{p:!0,children:["Управление серверном VPN, в т.ч. раздача доступов, осуществляется с помощью ",(0,s.jsx)("b",{children:(0,s.jsx)("u",{children:(0,s.jsx)(l.e9,{newTab:!0,href:"https://getoutline.org/ru/get-started/#step-1",children:"Outline Manager"})})}),", доступной для Windows, Max и Linux."]}),(0,s.jsx)(l.xv,{p:!0,children:"При запуске нужно добавить сервер и выбрать “Настроить Outline где угодно”. Появится инструкция по установке с помощью скрипта, который мы ранее запускали. А после поле для ввода ключа и адреса, который Вы до этого сохранили."}),(0,s.jsx)(l.xv,{p:!0,children:"После этого у Вас появится доступ к управлению сервером."}),(0,s.jsx)(l.xv,{title:!0,className:"mt-10 md:text",children:"Добавляем ключ"}),(0,s.jsxs)(l.xv,{p:!0,children:["В Outline Manager добавляем новый ключ в управлении сервером. Программа покажет ",(0,s.jsx)("b",{children:(0,s.jsx)("u",{children:(0,s.jsx)(l.e9,{newTab:!0,href:"https://github.com/Jigsaw-Code/outline-client/blob/master/docs/invitation-instructions.md",children:"ссылку на инструкцию"})})})," и сам ключ в виде строки:"]}),(0,s.jsx)(r.Z,{code:"\nss://XXXXXXXXXXXX@9.9.9.9:0/?outline=1\n                ",className:"my-5",language:"text"}),(0,s.jsx)(l.xv,{p:!0,children:"Скопируйте этот ключ, он понадобиться при запуске клиента Outline."}),(0,s.jsx)(l.xv,{title:!0,className:"mt-10 md:text",children:"Клиент для подключения"}),(0,s.jsxs)(l.xv,{p:!0,children:["И последний шаг - установка ",(0,s.jsx)("b",{children:(0,s.jsx)("u",{children:(0,s.jsx)(l.e9,{newTab:!0,href:"https://getoutline.org/ru/get-started/#step-3",children:"клиента для подключения"})})}),". Есть приложения для Android, Windows, Chrome, iOS, MacOS, Linux."]}),(0,s.jsx)(l.xv,{p:!0,children:"При первом запуске нужно нажать “Добавить сервер” и вставить полученный выше ключ."}),(0,s.jsx)(l.xv,{p:!0,children:"Готово!"}),(0,s.jsx)(l.xv,{title:!0,className:"mt-10 md:text",children:"Послесловие"}),(0,s.jsx)(l.xv,{p:!0,children:"Теперь Вы можете использовать Outline VPN. Надеюсь, что Вы будете его использовать без злого умысла."}),(0,s.jsx)(l.xv,{title:!0,className:"mt-10 md:text",children:"Полезные ссылки"}),(0,s.jsxs)(l.aV,{children:[(0,s.jsx)("li",{children:(0,s.jsx)("b",{children:(0,s.jsx)("u",{children:(0,s.jsx)(l.e9,{newTab:!0,href:"https://getoutline.org/ru/",children:"Официальный сайт"})})})}),(0,s.jsx)("li",{children:(0,s.jsx)("b",{children:(0,s.jsx)("u",{children:(0,s.jsx)(l.e9,{newTab:!0,href:"https://github.com/outline/outline",children:"Официальный репозиторий на GitHub"})})})}),(0,s.jsx)("li",{children:(0,s.jsx)("b",{children:(0,s.jsx)("u",{children:(0,s.jsx)(l.e9,{newTab:!0,href:"https://app.getoutline.com/share/770a97da-13e5-401e-9f8a-37949c19f97e/doc/hosting-outline-nipGaCRBDu",children:"Официальная документация"})})})}),(0,s.jsx)("li",{children:(0,s.jsx)("b",{children:(0,s.jsx)("u",{children:(0,s.jsx)(l.e9,{newTab:!0,href:"https://habr.com/ru/articles/358828/",children:"Outline: Делаем свой личный VPN от Google за 5$ в месяц (и за 1€ для продвинутых)"})})})}),(0,s.jsx)("li",{children:(0,s.jsx)("b",{children:(0,s.jsx)("u",{children:(0,s.jsx)(l.e9,{newTab:!0,href:"https://gist.github.com/okeehou/275bb83601be346921622e05f13cba70",children:"How to setup an Outline VPN Server on Ubuntu 16.04"})})})})]})]})},87855:function(e,n,t){"use strict";var s,l;t.d(n,{b:function(){return s}}),(l=s||(s={})).Min="350px",l.Standard="700px",l.Large="1000x",l.Unlimited=""},74313:function(e,n,t){"use strict";var s=t(37340),l=t(85893),r=t(67294),i=t(14965),a=t(41240),c=t(41686),d=t(87855);function h(){let e=(0,s._)(["\n        text-align: left;\n        overflow: hidden;\n        font-size: 14px;\n        border-radius: 6px;\n        overflow: auto;\n\n        & .token-line {\n            line-height: 1.3em;\n            height: 1.3em;\n        }\n    "]);return h=function(){return e},e}function x(){let e=(0,s._)(["\n        max-height: ","\n    "]);return x=function(){return e},e}n.Z=e=>{let{code:n,className:s,language:u,maxHeight:o=d.b.Standard}=e;(void 0!==t.g?t.g:window).Prism=i.p1,t(61354),t(79016),t(35266),t(92927),t(51315),t(57874),t(86862);let j=null!=o?o:d.b.Standard,b=c.ZP.pre(h()),m=(0,c.ZP)(b)(x(),j);return(0,l.jsx)("div",{className:(0,a.GF)("bg-blue-500 md:p-1 p-2",s),children:(0,l.jsx)("div",{className:"shadow-lg",children:(0,l.jsx)(i.y$,{theme:i.np.vsDark,code:n.trim(),language:null!=u?u:u="tsx",children:e=>{let{className:n,style:t,tokens:s,getLineProps:i,getTokenProps:a}=e;return(0,l.jsx)(m,{className:n,style:t,children:s.map((e,n)=>(0,r.createElement)("div",{...i({line:e,key:n}),key:Math.random()},e.map((e,n)=>(0,r.createElement)("span",{...a({token:e,key:n}),key:Math.random()}))))})}})})})}},44853:function(e,n,t){"use strict";t.d(n,{Ee:function(){return a},Xg:function(){return r},Y7:function(){return x},aV:function(){return d},e9:function(){return h},o_:function(){return u},tf:function(){return o},ty:function(){return c},xv:function(){return i}});var s=t(5152),l=t.n(s);let r=l()(()=>Promise.all([t.e(9686),t.e(4738),t.e(4838),t.e(1664),t.e(8765)]).then(t.bind(t,28765)),{loadableGenerated:{webpack:()=>[28765]}}),i=l()(()=>Promise.all([t.e(9511),t.e(935)]).then(t.bind(t,30935)),{loadableGenerated:{webpack:()=>[30935]}}),a=l()(()=>Promise.all([t.e(328),t.e(7651)]).then(t.bind(t,47651)),{loadableGenerated:{webpack:()=>[47651]}}),c=l()(()=>Promise.all([t.e(9686),t.e(6979)]).then(t.bind(t,16979)),{loadableGenerated:{webpack:()=>[16979]}}),d=l()(()=>Promise.all([t.e(4159),t.e(7355)]).then(t.bind(t,87355)),{loadableGenerated:{webpack:()=>[87355]}}),h=l()(()=>Promise.all([t.e(1664),t.e(3220)]).then(t.bind(t,53220)),{loadableGenerated:{webpack:()=>[53220]}});l()(()=>t.e(3140).then(t.bind(t,43140)),{loadableGenerated:{webpack:()=>[43140]}});let x=l()(()=>Promise.all([t.e(2004),t.e(736)]).then(t.bind(t,50736)),{loadableGenerated:{webpack:()=>[50736]}}),u=l()(()=>Promise.all([t.e(8331),t.e(8876),t.e(7354),t.e(839),t.e(5394),t.e(5533)]).then(t.bind(t,48641)),{loadableGenerated:{webpack:()=>[48641]}}),o=l()(()=>Promise.all([t.e(8331),t.e(1664),t.e(7354),t.e(839),t.e(8496)]).then(t.bind(t,48496)),{loadableGenerated:{webpack:()=>[48496]}})}},function(e){e.O(0,[6443,2888,9774,179],function(){return e(e.s=51406)}),_N_E=e.O()}]);