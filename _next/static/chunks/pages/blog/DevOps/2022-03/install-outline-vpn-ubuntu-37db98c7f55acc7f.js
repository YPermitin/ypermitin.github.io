(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2495],{1406:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/blog/DevOps/2022-03/install-outline-vpn-ubuntu",function(){return t(2448)}])},2448:function(e,n,t){"use strict";t.r(n);var s=t(5893),l=t(9305);t(7294);var i=t(6671);n.default=()=>(0,s.jsxs)(l.Xg,{blogcentered:!0,children:[(0,s.jsx)(l.xv,{title:!0,className:"mt-10 md:text",children:"Общая информация"}),(0,s.jsxs)(l.xv,{p:!0,children:["Outline VPN - это бесплатный инструмент с открытым исходным кодом, позволяющий развернуть собственную VPN на Вашем собственном сервере или на машине облачного провайдера. Подробную информацию Вы можете узнать ",(0,s.jsx)("b",{children:(0,s.jsx)("u",{children:(0,s.jsx)(l.e9,{newTab:!0,href:"https://getoutline.org/ru/",children:"здесь"})})})," и ",(0,s.jsx)("b",{children:(0,s.jsx)("u",{children:(0,s.jsx)(l.e9,{newTab:!0,href:"https://en.wikipedia.org/wiki/Outline_VPN",children:"здесь"})})}),"."]}),(0,s.jsx)(l.xv,{p:!0,children:"В своем составе имеет как графические инструменты, так и средства работы через командную строку. Позволяет использовать VPN как на настольных компьютерах, так и на мобильных устройствах."}),(0,s.jsx)(l.xv,{title:!0,className:"mt-10 md:text",children:"Прежде чем начать"}),(0,s.jsx)(l.xv,{p:!0,children:"Вам нужен сервер. Да, его нужно арендовать, учитывая его местоположение. Например, если Вам нужно получать доступ к ресурсам, которые недоступны в текущем местоположении, но доступны, например, в Канаде, то смело арендуйте виртуальную машину в AWS, Digital Ocean или любом другом месте."}),(0,s.jsx)(l.xv,{p:!0,children:"Для простых задач, например открытие сайтов, обмена текстовыми сообщениями в мессенджерах и т.д., подойдет хост с минимальными ресурсами:"}),(0,s.jsxs)(l.aV,{children:[(0,s.jsx)("li",{children:"1 ядро CPU."}),(0,s.jsx)("li",{children:"1 ГБ RAM (можно и меньше)."}),(0,s.jsx)("li",{children:"10 GB HDD для файлов ОС в основном."})]}),(0,s.jsxs)(l.xv,{p:!0,children:["Стоимость аренды такого сервера от 3$ до 5$ в месяц, плюс-минус. По необходимости ресурсов можно добавлять поболее. Операционная система - Ubuntu 20.04, т.к. инструкция именно для нее ",":)"]}),(0,s.jsx)(l.xv,{p:!0,children:"Как арендовать виртуальную машину тут рассматривать не будем, все зависит от провайдера."}),(0,s.jsx)(l.xv,{title:!0,className:"mt-10 md:text",children:"Начальная настройка сервера"}),(0,s.jsx)(l.xv,{p:!0,children:"И так, виртуальная машина арендована, доступ к ней по SSH имеется, Ubuntu установлена. Далее устанавливаем последние обновления."}),(0,s.jsx)(i.Z,{code:"\napt update\napt upgrade\n                ",className:"my-5",language:"bash"}),(0,s.jsx)(l.xv,{p:!0,children:"Сделайте перезагрузку машины после этого, если есть необходимость после установки обновлений."}),(0,s.jsx)(l.xv,{p:!0,children:"Сразу настроим брэндмауэр, чтобы защитить машину от несанкционированного доступа. Открываем доступ через SSH."}),(0,s.jsx)(i.Z,{code:"\nsudo ufw allow 22/tcp\n                ",className:"my-5",language:"bash"}),(0,s.jsx)(l.xv,{p:!0,children:"Если у Вас статический IP, то для безопасности доступ по SSH можно разрешить только для него."}),(0,s.jsx)(i.Z,{code:"\nsudo ufw allow from <ВашПостоянныйIP> to any port 22\n                ",className:"my-5",language:"bash"}),(0,s.jsx)(l.xv,{p:!0,children:"И включаем брэндмауэр."}),(0,s.jsx)(i.Z,{code:"\nsudo ufw enable\n                ",className:"my-5",language:"bash"}),(0,s.jsx)(l.xv,{p:!0,children:"Отлично! Машина защищена. Идем дальше."}),(0,s.jsx)(l.xv,{title:!0,className:"mt-10 md:text",children:"Установка Outline Server"}),(0,s.jsxs)(l.xv,{p:!0,children:["Для установки воспользуемся готовыми скриптами из проекта ",(0,s.jsx)("b",{children:(0,s.jsx)("u",{children:(0,s.jsx)(l.e9,{newTab:!0,href:"https://github.com/Jigsaw-Code/outline-server",children:"outline-server"})})})," компании Jigsaw."]}),(0,s.jsx)(l.xv,{p:!0,children:"Скрипт находится по адресу:"}),(0,s.jsx)(i.Z,{code:"\nhttps://github.com/Jigsaw-Code/outline-server/blob/master/src/server_manager/install_scripts/install_server.sh\n\n                ",className:"my-5",language:"text"}),(0,s.jsx)(l.xv,{p:!0,children:"Для установки достаточно выполнить следующую команду."}),(0,s.jsx)(i.Z,{code:"\nsudo wget -qO- https://raw.githubusercontent.com/Jigsaw-Code/outline-server/master/src/server_manager/install_scripts/install_server.sh | bash\n                ",className:"my-5",language:"bash"}),(0,s.jsx)(l.xv,{p:!0,children:"Будет установлен Docker и службы самого Outline, а также все зависимости. При необходимости Вы можете установить Docker самостоятельно перед запуском скрипта."}),(0,s.jsx)(i.Z,{code:"\nsudo curl https://get.docker.com | sh\n                ",className:"my-5",language:"bash"}),(0,s.jsx)(l.xv,{p:!0,children:"Когда скрипт закончит, то выведет примерно такое содержимое."}),(0,s.jsx)(i.Z,{code:'\n{ \n  "apiUrl": "https://0.0.0.0:0000/XXXXXXXXXXXX", \n  "certSha256": "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX" \n}\n                ',className:"my-5",language:"json"}),(0,s.jsx)(l.xv,{p:!0,children:"Также в консольном выводе будет информация о портах, которые нужно открыть для работы OutlineVPN Manager. Добавляем их в разрешенные (замените только на свои значения)."}),(0,s.jsx)(i.Z,{code:"\nsudo ufw allow 31111/tcp\nsudo ufw allow 24311/tcp\n                ",className:"my-5",language:"bash"}),(0,s.jsx)(l.xv,{p:!0,children:"Сохраните это себе на будущее. По факту сервер Outline VPN уже установлен и нам лишь нужно его настроить для своих нужд."}),(0,s.jsx)(l.xv,{title:!0,className:"mt-10 md:text",children:"Клиент для управления сервером"}),(0,s.jsxs)(l.xv,{p:!0,children:["Управление серверном VPN, в т.ч. раздача доступов, осуществляется с помощью ",(0,s.jsx)("b",{children:(0,s.jsx)("u",{children:(0,s.jsx)(l.e9,{newTab:!0,href:"https://getoutline.org/ru/get-started/#step-1",children:"Outline Manager"})})}),", доступной для Windows, Max и Linux."]}),(0,s.jsx)(l.xv,{p:!0,children:"При запуске нужно добавить сервер и выбрать “Настроить Outline где угодно”. Появится инструкция по установке с помощью скрипта, который мы ранее запускали. А после поле для ввода ключа и адреса, который Вы до этого сохранили."}),(0,s.jsx)(l.xv,{p:!0,children:"После этого у Вас появится доступ к управлению сервером."}),(0,s.jsx)(l.xv,{title:!0,className:"mt-10 md:text",children:"Добавляем ключ"}),(0,s.jsxs)(l.xv,{p:!0,children:["В Outline Manager добавляем новый ключ в управлении сервером. Программа покажет ",(0,s.jsx)("b",{children:(0,s.jsx)("u",{children:(0,s.jsx)(l.e9,{newTab:!0,href:"https://github.com/Jigsaw-Code/outline-client/blob/master/docs/invitation-instructions.md",children:"ссылку на инструкцию"})})})," и сам ключ в виде строки:"]}),(0,s.jsx)(i.Z,{code:"\nss://XXXXXXXXXXXX@9.9.9.9:0/?outline=1\n                ",className:"my-5",language:"text"}),(0,s.jsx)(l.xv,{p:!0,children:"Скопируйте этот ключ, он понадобиться при запуске клиента Outline."}),(0,s.jsx)(l.xv,{title:!0,className:"mt-10 md:text",children:"Клиент для подключения"}),(0,s.jsxs)(l.xv,{p:!0,children:["И последний шаг - установка ",(0,s.jsx)("b",{children:(0,s.jsx)("u",{children:(0,s.jsx)(l.e9,{newTab:!0,href:"https://getoutline.org/ru/get-started/#step-3",children:"клиента для подключения"})})}),". Есть приложения для Android, Windows, Chrome, iOS, MacOS, Linux."]}),(0,s.jsx)(l.xv,{p:!0,children:"При первом запуске нужно нажать “Добавить сервер” и вставить полученный выше ключ."}),(0,s.jsx)(l.xv,{p:!0,children:"Готово!"}),(0,s.jsx)(l.xv,{title:!0,className:"mt-10 md:text",children:"Послесловие"}),(0,s.jsx)(l.xv,{p:!0,children:"Теперь Вы можете использовать Outline VPN. Надеюсь, что Вы будете его использовать без злого умысла."}),(0,s.jsx)(l.xv,{title:!0,className:"mt-10 md:text",children:"Полезные ссылки"}),(0,s.jsxs)(l.aV,{children:[(0,s.jsx)("li",{children:(0,s.jsx)("b",{children:(0,s.jsx)("u",{children:(0,s.jsx)(l.e9,{newTab:!0,href:"https://getoutline.org/ru/",children:"Официальный сайт"})})})}),(0,s.jsx)("li",{children:(0,s.jsx)("b",{children:(0,s.jsx)("u",{children:(0,s.jsx)(l.e9,{newTab:!0,href:"https://github.com/outline/outline",children:"Официальный репозиторий на GitHub"})})})}),(0,s.jsx)("li",{children:(0,s.jsx)("b",{children:(0,s.jsx)("u",{children:(0,s.jsx)(l.e9,{newTab:!0,href:"https://app.getoutline.com/share/770a97da-13e5-401e-9f8a-37949c19f97e/doc/hosting-outline-nipGaCRBDu",children:"Официальная документация"})})})}),(0,s.jsx)("li",{children:(0,s.jsx)("b",{children:(0,s.jsx)("u",{children:(0,s.jsx)(l.e9,{newTab:!0,href:"https://habr.com/ru/articles/358828/",children:"Outline: Делаем свой личный VPN от Google за 5$ в месяц (и за 1€ для продвинутых)"})})})}),(0,s.jsx)("li",{children:(0,s.jsx)("b",{children:(0,s.jsx)("u",{children:(0,s.jsx)(l.e9,{newTab:!0,href:"https://gist.github.com/okeehou/275bb83601be346921622e05f13cba70",children:"How to setup an Outline VPN Server on Ubuntu 16.04"})})})})]})]})},9963:function(e,n,t){"use strict";var s,l;t.d(n,{b:function(){return s}}),(l=s||(s={})).Min="350px",l.Standard="700px",l.Large="1000x",l.Unlimited=""},6671:function(e,n,t){"use strict";var s=t(7340),l=t(5893),i=t(7294),r=t(4965),a=t(4275),c=t(964),d=t(9963);function h(){let e=(0,s._)(["\n        text-align: left;\n        overflow: hidden;\n        font-size: 14px;\n        border-radius: 6px;\n        overflow: auto;\n\n        & .token-line {\n            line-height: 1.3em;\n            height: 1.3em;\n        }\n    "]);return h=function(){return e},e}function x(){let e=(0,s._)(["\n        max-height: ","\n    "]);return x=function(){return e},e}n.Z=e=>{let{code:n,className:s,language:u,maxHeight:o=d.b.Standard}=e;(void 0!==t.g?t.g:window).Prism=r.p1,t(1354),t(9016),t(5266),t(2927),t(1315),t(7874),t(6862);let j=null!=o?o:d.b.Standard,b=c.ZP.pre(h()),p=(0,c.ZP)(b)(x(),j);return(0,l.jsx)("div",{className:(0,a.GF)("bg-blue-500 md:p-1 p-2",s),children:(0,l.jsx)("div",{className:"shadow-lg",children:(0,l.jsx)(r.y$,{theme:r.np.vsDark,code:n.trim(),language:null!=u?u:u="tsx",children:e=>{let{className:n,style:t,tokens:s,getLineProps:r,getTokenProps:a}=e;return(0,l.jsx)(p,{className:n,style:t,children:s.map((e,n)=>(0,i.createElement)("div",{...r({line:e,key:n}),key:Math.random()},e.map((e,n)=>(0,i.createElement)("span",{...a({token:e,key:n}),key:Math.random()}))))})}})})})}},9305:function(e,n,t){"use strict";t.d(n,{Ee:function(){return a},Xg:function(){return i},Y7:function(){return x},aV:function(){return d},e9:function(){return h},o_:function(){return u},ty:function(){return c},xv:function(){return r}});var s=t(5152),l=t.n(s);let i=l()(()=>Promise.all([t.e(4838),t.e(4738),t.e(1664),t.e(7167)]).then(t.bind(t,7167)),{loadableGenerated:{webpack:()=>[7167]}}),r=l()(()=>t.e(9179).then(t.bind(t,9179)),{loadableGenerated:{webpack:()=>[9179]}}),a=l()(()=>t.e(1974).then(t.bind(t,1974)),{loadableGenerated:{webpack:()=>[1974]}}),c=l()(()=>t.e(8547).then(t.bind(t,8547)),{loadableGenerated:{webpack:()=>[8547]}}),d=l()(()=>t.e(6806).then(t.bind(t,6806)),{loadableGenerated:{webpack:()=>[6806]}}),h=l()(()=>Promise.all([t.e(1664),t.e(1465)]).then(t.bind(t,1465)),{loadableGenerated:{webpack:()=>[1465]}});l()(()=>t.e(567).then(t.bind(t,567)),{loadableGenerated:{webpack:()=>[567]}});let x=l()(()=>Promise.all([t.e(2004),t.e(4139)]).then(t.bind(t,4139)),{loadableGenerated:{webpack:()=>[4139]}}),u=l()(()=>Promise.all([t.e(3811),t.e(7472),t.e(584),t.e(7870)]).then(t.bind(t,7870)),{loadableGenerated:{webpack:()=>[7870]}})}},function(e){e.O(0,[1102,2888,9774,179],function(){return e(e.s=1406)}),_N_E=e.O()}]);