(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4727],{57122:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/blog/DevOps/2024-08/ubuntu-vmware-kernel-modules-issue",function(){return t(5834)}])},5834:function(e,n,t){"use strict";t.r(n);var o=t(85893),i=t(44853);t(67294);var r=t(74313),l=t(29209);n.default=()=>(0,o.jsxs)(i.Xg,{blogcentered:!0,children:[(0,o.jsxs)(i.xv,{textAlign:l.PH.RIGHT,quote:!0,children:["Кто долго раздумывает, не всегда находит лучшее решение.",(0,o.jsx)("br",{}),"(с) Иоганн Вольфганг Гёте"]}),(0,o.jsx)(i.xv,{textAlign:l.PH.JUSTIFY,children:"Описание решения ошибок при установке модулей VMWare Workstation на Ubuntu 22.04 после обновления ядра или при начальной установке."}),(0,o.jsx)(i.xv,{title:!0,className:"mt-10 md:text",children:"Содержание"}),(0,o.jsxs)(i.aV,{children:[(0,o.jsx)("li",{children:(0,o.jsx)(i.e9,{href:"#description",children:(0,o.jsx)("b",{children:(0,o.jsx)("u",{children:"Описание проблемы"})})})}),(0,o.jsx)("li",{children:(0,o.jsx)(i.e9,{href:"#reason",children:(0,o.jsx)("b",{children:(0,o.jsx)("u",{children:"Причина ошибки"})})})}),(0,o.jsx)("li",{children:(0,o.jsx)(i.e9,{href:"#solve",children:(0,o.jsx)("b",{children:(0,o.jsx)("u",{children:"Как решить"})})})}),(0,o.jsx)("li",{children:(0,o.jsx)(i.e9,{href:"#links",children:(0,o.jsx)("b",{children:(0,o.jsx)("u",{children:"Полезные ссылки"})})})})]}),(0,o.jsxs)("section",{id:"section-description",children:[(0,o.jsx)(i.xv,{id:"description",title:!0,className:"mt-10 md:text",children:"Описание проблемы"}),(0,o.jsx)(i.xv,{textAlign:l.PH.JUSTIFY,children:"При попытке установки модулей VMWare Workstation могут возникнуть ошибки вида:"}),(0,o.jsx)(r.Z,{code:"\nUnable to install all modules\n                    ",className:"my-5",language:"text"}),(0,o.jsx)(i.xv,{textAlign:l.PH.JUSTIFY,children:"В логах установщика содержиться подобная информация:"}),(0,o.jsx)(r.Z,{code:"\nLog for VMware Workstation pid=4915 version=16.2.4 build=build-19376536 option=Release\nThe host is 64-bit.\nHost codepage=UTF-8 encoding=UTF-8\nHost is Linux 5.15.0-25-generic Ubuntu 22.04 LTS Ubuntu 22.04 LTS 22.04\n...\n...\n...\nUsing kernel build system.\n/tmp/modconfig-Xivrap/vmmon-only/common/phystrack.o: warning: objtool: PhysTrack_Free() falls through to next function PhysTrack_Add()\n/tmp/modconfig-Xivrap/vmmon-only/common/phystrack.o: warning: objtool: PhysTrack_Add() falls through to next function PhysTrack_Remove()\n/tmp/modconfig-Xivrap/vmmon-only/common/phystrack.o: warning: objtool: PhysTrack_Remove() falls through to next function PhysTrack_Test()\nIn file included from /tmp/modconfig-Xivrap/vmmon-only/./include/x86desc.h:33,\n                 from /tmp/modconfig-Xivrap/vmmon-only/./include/modulecall.h:34,\n                  from /tmp/modconfig-Xivrap/vmmon-only/common/task.c:60:\n/tmp/modconfig-Xivrap/vmmon-only/common/task.c: In function ‘TaskRestoreHostGDTTRLDT’:\n/tmp/modconfig-Xivrap/vmmon-only/./include/vm_asm_x86.h:67:44: error: expression in static assertion is not constant\n    67 |    ASSERT_ON_COMPILE(sizeof(Selector) == 2 &&                                       |                      ~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n    68 |                      ((__builtin_constant_p(expr) && ((expr) >> 16) == 0) ||        |                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n    69 |                       sizeof(expr) <= 2))\n      |                       ~~~~~~~~~~~~~~~~~~   \n...\n                    ",className:"my-5",language:"text"}),(0,o.jsx)(i.xv,{textAlign:l.PH.JUSTIFY,children:"Или могут быть ошибки такого вида (пример для русской локализации):"}),(0,o.jsx)(r.Z,{code:"\nIn file included from /tmp/modconfig-QkiJUD/vmmon-only/common/apic.c:19:\n /tmp/modconfig-QkiJUD/vmmon-only/./include/vm_basic_defs.h:54:12: fatal error: stddef.h: Нет такого файла или каталога\n    54 | #  include <stddef.h>\n       |            ^~~~~~~~~~\n compilation terminated.\n make[2]: *** [scripts/Makefile.build:257: /tmp/modconfig-QkiJUD/vmmon-only/common/apic.o] Ошибка 1\n make[2]: *** Ожидание завершения заданий…\n In file included from /tmp/modconfig-QkiJUD/vmmon-only/bootstrap/bootstrap.c:27:\n /tmp/modconfig-QkiJUD/vmmon-only/./include/vm_basic_defs.h:54:12: fatal error: stddef.h: Нет такого файла или каталога\n    54 | #  include <stddef.h>\n       |            ^~~~~~~~~~\n compilation terminated.\n make[2]: *** [scripts/Makefile.build:257: /tmp/modconfig-QkiJUD/vmmon-only/bootstrap/bootstrap.o] Ошибка 1\n In file included from /tmp/modconfig-QkiJUD/vmmon-only/./include/cpu_types.h:29,\n                  from /tmp/modconfig-QkiJUD/vmmon-only/./include/modulecall.h:33,\n                  from /tmp/modconfig-QkiJUD/vmmon-only/common/crosspage.c:57:\n /tmp/modconfig-QkiJUD/vmmon-only/./include/vm_basic_defs.h:54:12: fatal error: stddef.h: Нет такого файла или каталога\n    54 | #  include <stddef.h>\n       |            ^~~~~~~~~~\n compilation terminated.\n                    ",className:"my-5",language:"text"})]}),(0,o.jsxs)("section",{id:"section-reason",children:[(0,o.jsx)(i.xv,{id:"reason",title:!0,className:"mt-10 md:text",children:"Причина ошибки"}),(0,o.jsx)(i.xv,{textAlign:l.PH.JUSTIFY,children:"Дистрибутив модулей ядра для VMWare Workstation, который поставлялся с установщиком программы, устарел и стал несовместимым с текущей версией ядра."})]}),(0,o.jsxs)("section",{id:"section-solve",children:[(0,o.jsx)(i.xv,{id:"solve",title:!0,className:"mt-10 md:text",children:"Как решить"}),(0,o.jsx)(i.xv,{textAlign:l.PH.JUSTIFY,children:"Необходимо обновить модули до актуальной версии. Для этого нужно выполнить ряд команд:"}),(0,o.jsx)(r.Z,{code:"\n# Переходим в каталог с исходными файлами модулей\ncd /usr/lib/vmware/modules/source\n# Клонируем публичный репозиторий модулей VMWare Workstation от Michal Kubeček\ngit clone https://github.com/mkubecek/vmware-host-modules\n# Переходим в каталог склонированного репозитория\ncd vmware-host-modules\n# Переходим на ветку, в которой идет разработка для версии 16.2.4 \n# (!!! Здесь можно указать версию, которая нужна Вам)\ngit checkout workstation-16.2.4\n# Выполняем сборку\nmake\n# Создаем архивы для модулей\ntar -cf vmnet.tar vmnet-only\ntar -cf vmmon.tar vmmon-only\n# И заменяем старые архивы на новые\nmv vmnet.tar /usr/lib/vmware/modules/source/\nmv vmmon.tar /usr/lib/vmware/modules/source/\n# Повторно делаем установку модулей VMWare Workstation\nvmware-modconfig --console --install-all\n                    ",className:"my-5",language:"bash"}),(0,o.jsx)(i.xv,{textAlign:l.PH.JUSTIFY,children:"После этого VMWare Workstation будет успешно запущен."}),(0,o.jsx)(i.xv,{textAlign:l.PH.JUSTIFY,children:"Не забываем, что команды нужно вводить с соответствующими привилегиями."})]}),(0,o.jsxs)("section",{id:"section-links",children:[(0,o.jsx)(i.xv,{id:"links",title:!0,className:"mt-10 md:text",children:"Полезные ссылки"}),(0,o.jsxs)(i.aV,{children:[(0,o.jsx)("li",{children:(0,o.jsx)(i.e9,{newTab:!0,href:"https://github.com/mkubecek/vmware-host-modules",children:(0,o.jsx)("u",{children:(0,o.jsx)("b",{children:"vmware-host-modules - репозиторий с патчами для модулей ядра VMWare Player и VMWare Workstation."})})})}),(0,o.jsxs)("li",{children:["Обсуждение проблем ",(0,o.jsx)(i.e9,{newTab:!0,href:"https://communities.vmware.com/t5/VMware-Workstation-Player/ubuntu-22-04-install-vm-workstation-error/td-p/2905277",children:(0,o.jsx)("u",{children:(0,o.jsx)("b",{children:"в сообществе VMWare"})})})," и ",(0,o.jsx)(i.e9,{newTab:!0,href:"https://communities.vmware.com/t5/VMware-Workstation-Pro/VMware-16-2-3-not-working-on-Ubuntu-22-04-LTS/td-p/2905535",children:(0,o.jsx)("u",{children:(0,o.jsx)("b",{children:"здесь"})})}),"."]})]})]})]})},87855:function(e,n,t){"use strict";var o,i;t.d(n,{b:function(){return o}}),(i=o||(o={})).Min="350px",i.Standard="700px",i.Large="1000x",i.Unlimited=""},74313:function(e,n,t){"use strict";var o=t(37340),i=t(85893),r=t(67294),l=t(14965),s=t(41240),a=t(41686),c=t(87855);function d(){let e=(0,o._)(["\n        text-align: left;\n        overflow: hidden;\n        font-size: 14px;\n        border-radius: 6px;\n        overflow: auto;\n\n        & .token-line {\n            line-height: 1.3em;\n            height: 1.3em;\n        }\n    "]);return d=function(){return e},e}function m(){let e=(0,o._)(["\n        max-height: ","\n    "]);return m=function(){return e},e}n.Z=e=>{let{code:n,className:o,language:u,maxHeight:h=c.b.Standard}=e;(void 0!==t.g?t.g:window).Prism=l.p1,t(61354),t(79016),t(2731),t(35266),t(92927),t(51315),t(57874),t(86862);let x=null!=h?h:c.b.Standard,f=a.ZP.pre(d()),p=(0,a.ZP)(f)(m(),x);return(0,i.jsx)("div",{className:(0,s.GF)("bg-blue-500 md:p-1 p-2",o),children:(0,i.jsx)("div",{className:"shadow-lg",children:(0,i.jsx)(l.y$,{theme:l.np.vsDark,code:n.trim(),language:null!=u?u:u="tsx",children:e=>{let{className:n,style:t,tokens:o,getLineProps:l,getTokenProps:s}=e;return(0,i.jsx)(p,{className:n,style:t,children:o.map((e,n)=>(0,r.createElement)("div",{...l({line:e,key:n}),key:Math.random()},e.map((e,n)=>(0,r.createElement)("span",{...s({token:e,key:n}),key:Math.random()}))))})}})})})}},44853:function(e,n,t){"use strict";t.d(n,{Ee:function(){return s},Xg:function(){return r},Y7:function(){return m},aV:function(){return c},e9:function(){return d},o_:function(){return u},tf:function(){return h},ty:function(){return a},xv:function(){return l}});var o=t(5152),i=t.n(o);let r=i()(()=>Promise.all([t.e(9686),t.e(4738),t.e(4838),t.e(1664),t.e(8765)]).then(t.bind(t,28765)),{loadableGenerated:{webpack:()=>[28765]}}),l=i()(()=>Promise.all([t.e(9511),t.e(935)]).then(t.bind(t,30935)),{loadableGenerated:{webpack:()=>[30935]}}),s=i()(()=>Promise.all([t.e(328),t.e(7651)]).then(t.bind(t,47651)),{loadableGenerated:{webpack:()=>[47651]}}),a=i()(()=>Promise.all([t.e(9686),t.e(6979)]).then(t.bind(t,16979)),{loadableGenerated:{webpack:()=>[16979]}}),c=i()(()=>Promise.all([t.e(4159),t.e(7355)]).then(t.bind(t,87355)),{loadableGenerated:{webpack:()=>[87355]}}),d=i()(()=>Promise.all([t.e(1664),t.e(3220)]).then(t.bind(t,53220)),{loadableGenerated:{webpack:()=>[53220]}});i()(()=>t.e(3140).then(t.bind(t,43140)),{loadableGenerated:{webpack:()=>[43140]}});let m=i()(()=>Promise.all([t.e(2004),t.e(736)]).then(t.bind(t,50736)),{loadableGenerated:{webpack:()=>[50736]}}),u=i()(()=>Promise.all([t.e(8331),t.e(8876),t.e(7354),t.e(839),t.e(5394),t.e(5533)]).then(t.bind(t,48641)),{loadableGenerated:{webpack:()=>[48641]}}),h=i()(()=>Promise.all([t.e(8331),t.e(1664),t.e(7354),t.e(839),t.e(8496)]).then(t.bind(t,48496)),{loadableGenerated:{webpack:()=>[48496]}})}},function(e){e.O(0,[4104,2888,9774,179],function(){return e(e.s=57122)}),_N_E=e.O()}]);